
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!-- Required meta tags -->

    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta
      name="keywords"
      content="Bootstrap, Landing page, Template, Registration, Landing"
    />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
    />
    <meta name="author" content="UIdeck" />
    <title>Job Listings</title>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="./browse-jobs_files/bootstrap.min.css" />
    <link rel="stylesheet" href="./browse-jobs_files/line-icons.css" />
    <link rel="stylesheet" href="./browse-jobs_files/owl.carousel.min.css" />
    <link rel="stylesheet" href="./browse-jobs_files/owl.theme.default.css" />
    <link rel="stylesheet" href="./browse-jobs_files/slicknav.min.css" />
    <link rel="stylesheet" href="./browse-jobs_files/animate.css" />
    <link rel="stylesheet" href="./browse-jobs_files/main.css" />
    <link rel="stylesheet" href="./browse-jobs_files/responsive.css" />
    <link rel="stylesheet" href="./JobXSearch/main.css" />
    <link rel="icon" href="./JobXSearch/logo.png">
    <link href="https://cdn.lineicons.com/5.0/lineicons.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

    <link
      rel="stylesheet"
      id="colors"
      href="./browse-jobs_files/cyan.css"
      type="text/css"
    />
    <link
      rel="stylesheet"
      href="./browse-jobs_files/color-switcher.css"
      type="text/css"
    />
    <style>
      .similar-jobs-heading {
        font-size: 2rem; /* Adjust size as needed */
        font-weight: bold;
        color: #333; /* You can change this color */
        position: relative;
      }

      .similar-jobs-heading::after {
        content: "";
        position: absolute;
        width: 50%;
        height: 3px;
        background-color: #007bff; /* Blue underline or choose your color */
        bottom: -5px; /* Adjust spacing between text and underline */
        left: 25%;
        transition: width 0.3s ease, left 0.3s ease;
      }

      .similar-jobs-heading:hover::after {
        width: 100%;
        left: 0;
      }
     
     .links{
        font-weight: bold !important;
        font-size: 17px!important;
      }
      .heart-icon{
         background-color: #fff!important;
         color: #00BCD4 !important;
         border: 1px solid #00BCD4!important;
}

      
    </style>
  </head>

  <body>
    <!-- Header Section Start -->
   <header id="home" class="hero-area">
    <!-- Navbar Start -->
    <nav class="navbar navbar-expand-lg fixed-top scrolling-navbar">
      <div class="container">
        <div class="theme-header clearfix">
          <!-- Brand and toggle get grouped for better mobile display -->
          <div class="navbar-header">
            <button
              class="navbar-toggler"
              type="button"
              data-toggle="collapse"
              data-target="#main-navbar"
              aria-controls="main-navbar"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
              <span class="lni-menu"></span>
              <span class="lni-menu"></span>
              <span class="lni-menu"></span>
            </button>
            <a href="./index.html" class="navbar-brand"
              ><img src="./JobXSearch/logo.png" alt="" class="brand-img" />
              <h4 class="brand-name">Pagaar India</h4></a
            >
          </div>
          <div class="collapse navbar-collapse" id="main-navbar">
            <ul class="navbar-nav mr-auto w-100 justify-content-end">
              <li class="nav-item active">
                <a class="nav-link links" href="./index.html"> Home </a>
              </li>
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle links"
                  href="./browse-jobs.html#"
                  data-toggle="dropdown"
                  aria-haspopup="true"
                  aria-expanded="false"
                >
                  Pages
                </a>
                <ul class="dropdown-menu">
                  <li>
                    <a class="dropdown-item links" href="./About.html">About</a>
                  </li>
                  <li>
                    <a class="dropdown-item links" href="./job-page.html"
                      >Job Page</a
                    >
                  </li>
                  <li>
                    <a class="dropdown-item links" href="/dashboard"
                      >Dashboard</a
                    >
                  </li>
                  <li>
                    <a class="dropdown-item links" href="./resume.html"
                      >Resume Page</a
                    >
                  </li>
                  <li>
                    <a class="dropdown-item links" href="./privacy.html"
                      >Privacy Policy</a
                    >
                  </li>
                  <li>
                    <a class="dropdown-item links" href="./faq.html">FAQ</a>
                  </li>
                  <!-- <li>
                    <a class="dropdown-item links" href="./pricing.html"
                      >Pricing Tables</a
                    >
                  </li> -->
                  <li>
                    <a class="dropdown-item links" href="/contact">Contact</a>
                  </li>
                </ul>
              </li>
              <li class="nav-item dropdown ">
                <a
                  class="nav-link dropdown-toggle links"
                  href="./browse-jobs.html#"
                  data-toggle="dropdown"
                  aria-haspopup="true"
                  aria-expanded="false"
                >
                  Candidates
                </a>
                <ul class="dropdown-menu">
                  <li>
                    <a class="dropdown-item links" href="./browse-jobs.html"
                      >Browse Jobs</a
                    >
                  </li>
                  <li>
                    <a class="dropdown-item links" href="./browse-categories.html"
                      >Browse Categories</a
                    >
                  </li>
                  <!-- <li>
                    <a class="dropdown-item links" href="./add-resume.html"
                      >Add Resume</a
                    >
                  </li> -->
                  <!-- <li>
                    <a class="dropdown-item links" href="./manage-resumes.html"
                      >Manage Resumes</a
                    >
                  </li> -->
                  <li>
                    <a class="dropdown-item links" href="/job-alerts"
                      >Job Alerts</a
                    >
                  </li>
                </ul>
              </li>
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle links"
                  href="./browse-jobs.html#"
                  data-toggle="dropdown"
                  aria-haspopup="true"
                  aria-expanded="false"
                >
                  Employers
                </a>
                <ul class="dropdown-menu">
                  <li>
                    <a class="dropdown-item links" href="./post-job.html">Add Job</a>
                  </li>
                  <!-- <li>
                    <a class="dropdown-item links" href="./manage-jobs.html"
                      >Manage Jobs</a
                    >
                  </li> -->
                  <li>
                    <a class="dropdown-item links" href="./manage-applications.html"
                      >Manage Applications</a
                    >
                  </li>
                  <li>
                    <a class="dropdown-item links" href="./browse-resumes.html"
                      >Browse Resumes</a
                    >
                  </li>
                </ul>
              </li>
              <!-- <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle links"
                  href="./browse-jobs.html#"
                  data-toggle="dropdown"
                  aria-haspopup="true"
                  aria-expanded="false"
                >
                  Blog
                </a>
                <ul class="dropdown-menu">
                  <li>
                    <a class="dropdown-item links" href="./blog.html"
                      >Blog - Right Sidebar</a
                    >
                  </li>
                  <li>
                    <a class="dropdown-item links" href="./blog-left-sidebar.html"
                      >Blog - Left Sidebar</a
                    >
                  </li>
                  <li>
                    <a class="dropdown-item links" href="./blog-full-width.html">
                      Blog full width</a
                    >
                  </li>
                  <li>
                    <a class="dropdown-item links" href="./single-post.html"
                      >Blog Single Post</a
                    >
                  </li>
                </ul>
              </li> -->
              <li class="nav-item">
                <a class="nav-link links" href="/contact"> Contact </a>
              </li>
              <li class="nav-item">
                <a class="nav-link links" href="./index.html">Logout</a>
              </li>
              <li class="button-group">
                <a href="./post-job.html" class="button btn btn-common"
                  >Post a Job</a
                >
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="mobile-menu" data-logo="/JobXSearch/logo.png">
        
      </div>
    </nav>
      <!-- Navbar End -->
    </header>
    <!-- Header Section End -->

    <!-- Page Header Start -->
    <div class="page-header">
      <div class="container">
        <div class="row">
          <div class="col-lg-12">
            <div class="inner-header">
              <h3>Browse Job</h3>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Page Header End -->

    <!-- Job Browse Section Start -->
    <section class="job-browse section">
      <div class="container">
        <div class="row">
          <div class="col-lg-12 col-md-12 col-xs-12">
            <div class="wrap-search-filter row">
              <div class="col-lg-5 col-md-5 col-xs-12">
                <input
                  type="text"
                  class="form-control"
                  id="keyword"
                  placeholder="Keyword: Name, Tag"
                />
              </div>
              <div class="col-lg-5 col-md-5 col-xs-12">
                <input
                  type="text"
                  class="form-control"
                  id="location"
                  placeholder="Location: City, State, Zip"
                />
              </div>
              <div class="col-lg-2 col-md-2 col-xs-12">
                <button onclick="fetchJobs()">Search</button>
              </div>
            </div>
          </div>
        </div>
        <div class="row" id="jobsContainer"></div>
        <br />
        <!-- <h4 class="similar-jobs-heading text-center py-4">
          Similar Jobs On the Page
        </h4> -->
        <br>
        <!-- <div class="row">
          <div class="col-lg-6 col-md-12 col-xs-12">
            <a class="job-listings-featured" href="/dashboard">
              <div class="row">
                <div class="col-lg-6 col-md-6 col-xs-12">
                  <div class="job-company-logo">
                    <img src="./browse-jobs_files/img1.png" alt="" />
                  </div>
                  <div class="job-details">
                    <h3>Software Engineer</h3>
                    <span class="company-neme">MizTech</span>
                    <div class="tags">
                      <span><i class="lni-map-marker"></i> New York</span>
                      <span><i class="lni-user"></i>John Smith</span>
                    </div>
                  </div>
                </div>
                <div class="col-lg-6 col-md-6 col-xs-12 text-right">
                  <div class="tag-type">
                    <span class="heart-icon">
                      <i class="lni-heart"></i>
                    </span>
                    <span class="full-time">Full Time</span>
                  </div>
                </div>
              </div>
            </a>
          </div>
          <div class="col-lg-6 col-md-12 col-xs-12">
            <a class="job-listings-featured" href="/dashboard">
              <div class="row">
                <div class="col-lg-6 col-md-6 col-xs-12">
                  <div class="job-company-logo">
                    <img src="./browse-jobs_files/img2.png" alt="" />
                  </div>
                  <div class="job-details">
                    <h3>Graphic Designer</h3>
                    <span class="company-neme">Hunter Inc.</span>
                    <div class="tags">
                      <span><i class="lni-map-marker"></i> New York</span>
                      <span><i class="lni-user"></i>John Smith</span>
                    </div>
                  </div>
                </div>
                <div class="col-lg-6 col-md-6 col-xs-12 text-right">
                  <div class="tag-type">
                    <span class="heart-icon">
                      <i class="lni-heart"></i>
                    </span>
                    <span class="part-time">Part Time</span>
                  </div>
                </div>
              </div>
            </a>
          </div>
          <div class="col-lg-6 col-md-12 col-xs-12">
            <a class="job-listings-featured" href="/dashboard">
              <div class="row">
                <div class="col-lg-6 col-md-6 col-xs-12">
                  <div class="job-company-logo">
                    <img src="./browse-jobs_files/img3.png" alt="" />
                  </div>
                  <div class="job-details">
                    <h3>Managing Director</h3>
                    <span class="company-neme">MagNews</span>
                    <div class="tags">
                      <span><i class="lni-map-marker"></i> New York</span>
                      <span><i class="lni-user"></i>John Smith</span>
                    </div>
                  </div>
                </div>
                <div class="col-lg-6 col-md-6 col-xs-12 text-right">
                  <div class="tag-type">
                    <span class="heart-icon">
                      <i class="lni-heart"></i>
                    </span>
                    <span class="part-time">Part Time</span>
                  </div>
                </div>
              </div>
            </a>
          </div>
          <div class="col-lg-6 col-md-12 col-xs-12">
            <a class="job-listings-featured" href="/dashboard">
              <div class="row">
                <div class="col-lg-6 col-md-6 col-xs-12">
                  <div class="job-company-logo">
                    <img src="./browse-jobs_files/img4.png" alt="" />
                  </div>
                  <div class="job-details">
                    <h3>Software Engineer</h3>
                    <span class="company-neme">AmazeSoft</span>
                    <div class="tags">
                      <span><i class="lni-map-marker"></i> New York</span>
                      <span><i class="lni-user"></i>John Smith</span>
                    </div>
                  </div>
                </div>
                <div class="col-lg-6 col-md-6 col-xs-12 text-right">
                  <div class="tag-type">
                    <span class="heart-icon">
                      <i class="lni-heart"></i>
                    </span>
                    <span class="full-time">Full Time</span>
                  </div>
                </div>
              </div>
            </a>
          </div>
          <div class="col-lg-6 col-md-12 col-xs-12">
            <a class="job-listings-featured" href="/dashboard">
              <div class="row">
                <div class="col-lg-6 col-md-6 col-xs-12">
                  <div class="job-company-logo">
                    <img src="./browse-jobs_files/img5.png" alt="" />
                  </div>
                  <div class="job-details">
                    <h3>Graphic Designer</h3>
                    <span class="company-neme">Bingo</span>
                    <div class="tags">
                      <span><i class="lni-map-marker"></i> New York</span>
                      <span><i class="lni-user"></i>John Smith</span>
                    </div>
                  </div>
                </div>
                <div class="col-lg-6 col-md-6 col-xs-12 text-right">
                  <div class="tag-type">
                    <span class="heart-icon">
                      <i class="lni-heart"></i>
                    </span>
                    <span class="full-time">Full Time</span>
                  </div>
                </div>
              </div>
            </a>
          </div>
          <div class="col-lg-6 col-md-12 col-xs-12">
            <a class="job-listings-featured" href="/dashboard">
              <div class="row">
                <div class="col-lg-6 col-md-6 col-xs-12">
                  <div class="job-company-logo">
                    <img src="./browse-jobs_files/img6.png" alt="" />
                  </div>
                  <div class="job-details">
                    <h3>Managing Director</h3>
                    <span class="company-neme">MagNews</span>
                    <div class="tags">
                      <span><i class="lni-map-marker"></i> New York</span>
                      <span><i class="lni-user"></i>John Smith</span>
                    </div>
                  </div>
                </div>
                <div class="col-lg-6 col-md-6 col-xs-12 text-right">
                  <div class="tag-type">
                    <span class="heart-icon">
                      <i class="lni-heart"></i>
                    </span>
                    <span class="part-time">Part Time</span>
                  </div>
                </div>
              </div>
            </a>
          </div>
          <div class="col-lg-12 col-md-12 col-xs-12">
            <!-- Start Pagination -->
            <ul class="pagination">
              <li class="active">
                <a href="./browse-jobs.html#" class="btn-prev"
                  ><i class="lni-angle-left"></i> prev</a
                >
              </li>
              <li>
                <a href="./browse-jobs.html#">1</a>
              </li>
              <li>
                <a href="./browse-jobs.html#">2</a>
              </li>
              <li>
                <a href="./browse-jobs.html#">3</a>
              </li>
              <li>
                <a href="./browse-jobs.html#">4</a>
              </li>
              <li>
                <a href="./browse-jobs.html#">5</a>
              </li>
              <li class="active">
                <a href="./browse-jobs.html#" class="btn-next"
                  >Next <i class="lni-angle-right"></i
                ></a>
              </li>
            </ul>
            <!-- End Pagination -->
          </div>
        </div> -->
      </div>
    </section>
    <!-- Job Browse Section End -->

    <!-- Footer Section Start -->
    <footer>
      <!-- Footer Area Start -->
      <section class="footer-Content">
        <div class="container">
          <div class="row">
            <div class="col-lg-3 col-md-3 col-xs-12">
              <div class="widget">
                <div class="footer-logo">
                  <img
                    src="./JobXSearch/logo.png"
                    alt=""
                    class="footer-logo-img"
                  />
                </div>
                <div class="textwidget">
                  <p>
                    At JobXSearch (Pagaar India), we bridge the gap between ambition and
                    success, making job hunting and hiring faster, smarter, and
                    more efficient!" 🚀
                  </p>
                </div>
              </div>
            </div>
            <div class="col-lg-6 col-md-4 col-xs-12">
              <div class="widget">
                <h3 class="block-title">Quick Links</h3>
                <ul class="menu">
                  <li>
                    <a href="./About.html#">About Us</a>
                  </li>
                  <li>
                    <a href="./faq.html#">Support</a>
                  </li>
                  <li>
                    <a href="./browse-jobs.html#">License</a>
                  </li>
                  <li>
                    <a href="/contact">Contact</a>
                  </li>
                </ul>
                <ul class="menu">
                  <li>
                    <a href="./privacy.html">Terms &amp; Conditions</a>
                  </li>
                  <li>
                    <a href="./privacy.html">Privacy</a>
                  </li>
                  <li>
                    <a href="./privacy.html">Refferal Terms</a>
                  </li>
                  <li>
                    <a href="#">Product License</a>
                  </li>
                </ul>
              </div>
            </div>
            <div class="col-lg-3 col-md-4 col-xs-12">
              <div class="widget">
                <h3 class="block-title">Subscribe Now</h3>
                <p>
                  "We're here to help you succeed—reach out today, and let’s
                  turn your hiring or job search goals into reality!" 🚀
                </p>
                <form
                  method="post"
                  id="subscribe-form"
                  name="subscribe-form"
                  class="validate"
                >
                  <div class="form-group is-empty">
                    <input
                      type="email"
                      value=""
                      name="Email"
                      class="form-control"
                      id="EMAIL"
                      placeholder="Enter Email..."
                      required=""
                    />
                    <button
                      type="submit"
                      name="subscribe"
                      id="subscribes"
                      class="btn btn-common sub-btn"
                    >
                      <i class="lni lni-envelope-1"></i>
                    </button>
                    <div class="clearfix"></div>
                  </div>
                </form>
                <ul class="mt-3 footer-social">
                  <li>
                    <a class="facebook" href="./browse-jobs.html#"
                      ><i class="lni lni-facebook"></i
                    ></a>
                  </li>
                  <li>
                    <a class="twitter" href="./browse-jobs.html#"
                      ><i class="lni lni-twitter-old"></i
                    ></a>
                  </li>
                  <li>
                    <a class="linkedin" href="./browse-jobs.html#"
                      ><i class="lni lni-linkedin"></i
                    ></a>
                  </li>
                  <li>
                    <a class="google-plus" href="./browse-jobs.html#"
                      ><i class="lni lni-google"></i
                    ></a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </section>
      <!-- Footer area End -->

      <div id="copyright">
        <div class="container">
          <div class="row">
            <div class="col-md-12">
              <div class="site-info text-center">
                <p>
                  Designed and Developed by
                  <a href="https://limzedsoftware.com/" rel="nofollow"
                    >LIMZED SOFTWARE</a
                  >
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>
    <!-- Footer Section End -->

    <!-- Go To Top Link -->
    <a href="index.html#" class="back-to-top" style="display: none">
      <i class="lni lni-arrow-upward"></i>
    </a>

    <!-- Preloader -->
    <div id="preloader" style="display: none">
      <div class="loader" id="loader-1"></div>
    </div>
    <!-- End Preloader -->

    <!-- jQuery first, then Tether, then Bootstrap JS. -->
    <script src="./browse-jobs_files/jquery-min.js.download"></script>
    <script src="./browse-jobs_files/popper.min.js.download"></script>
    <script src="./browse-jobs_files/color-switcher.js.download"></script>
    <div id="color-style-switcher">
      <div>
        <h3>Color Palette</h3>
        <ul class="colors">
          <li>
            <a class="color1 active" href="./browse-jobs.html#"></a>
          </li>
          <li>
            <a class="color2" href="./browse-jobs.html#"></a>
          </li>
          <li>
            <a class="color3" href="./browse-jobs.html#"></a>
          </li>
          <li>
            <a class="color4" href="./browse-jobs.html#"></a>
          </li>
          <li>
            <a class="color5" href="./browse-jobs.html#"></a>
          </li>
          <li><a class="color6" href="./browse-jobs.html#"></a></li>
        </ul>
      </div>
      <div class="bottom">
        <a href="./browse-jobs.html#" class="settings"
          ><i class="lni lni-colour-palette-3"></i
        ></a>
      </div>
    </div>
    <script src="./browse-jobs_files/owl.carousel.min.js.download"></script>
    <script src="./browse-jobs_files/jquery.slicknav.js.download"></script>
    <script src="./browse-jobs_files/jquery.counterup.min.js.download"></script>
    <script src="./browse-jobs_files/waypoints.min.js.download"></script>
    <script src="./browse-jobs_files/form-validator.min.js.download"></script>
    <script src="./browse-jobs_files/contact-form-script.js.download"></script>
    <script src="./browse-jobs_files/main.js.download"></script>
    <script>
      async function fetchJobs() {
        const keyword = document.querySelector("#keyword").value;
        const location = document.querySelector("#location").value;

        try {

          const savedRes = await fetch('/user/saved-jobs', {
            headers: {
              Authorization: `Bearer ${localStorage.getItem("token")}`,
            },
          });
          const savedJobs = await savedRes.json();
          
          const res = await fetch(
            `/job/jobs?keyword=${keyword}&location=${location}`
          );
          const jobs = await res.json();
          

          const container = document.querySelector("#jobsContainer");
          container.innerHTML = "";

          if (jobs.length === 0) {
            container.innerHTML = `<div class="col-12 text-center"><p>No jobs found for the given filter.</p></div>`;
            return;
          }

          // If only one job, ensure it spans the full width
          if (jobs.length === 1) {
            container.innerHTML = `
              <div class="col-12">
                <a class="job-listings-featured" href="/job-details.html?id=${jobs[0]._id}">
                  <div class="row">
                    <div class="col-lg-6 col-md-6 col-xs-12 d-flex">
                      <div class="job-company-logo">
                        <img src="${jobs[0].logo}" alt="" width="20%">
                      </div>
                      <div class="job-details">
                        <h3>${jobs[0].title}</h3>
                        <span class="company-neme">${jobs[0].company}</span>
                        <div class="tags">
                          <span><i class="lni-map-marker"></i> ${jobs[0].location}</span>
                          <span><i class="lni-user"></i>${jobs[0].Employer_id.director} </span>
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-6 col-md-6 col-xs-12 text-right">
                      <div class="tag-type">
                        <span class="heart-icon ${isSaved ? 'filled' : ''}" data-jobid="${job._id}">
  <i class="bi ${isSaved ? 'bi-heart-fill bookmarked' : 'bi-heart'}"></i>
</span>

                        <span class="full-time">${jobs[0].jobType}</span>
                      </div>
                    </div>
                  </div>
                </a>
              </div>
            `;
          } else {
            jobs.forEach((job) => {
              const isSaved = savedJobs.includes(job_id);
              console.log(job)
              container.innerHTML += `
                <div class="col-lg-6 col-md-12 col-xs-12">
                  <a class="job-listings-featured" href="/job-details.html?id=${job._id}">
                    <div class="row">
                      <div class="col-lg-6 col-md-6 col-xs-12">
                        <div class="job-company-logo">
                          <img src="${job.logo}" alt="" height="25px" width="20px">
                        </div>
                        <div class="job-details">
                          <h3>${job.title}</h3>
                          <span class="company-neme">${job.company}</span>
                          <div class="tags">
                            <span><i class="lni-map-marker"></i> ${job.location}</span>
                            <span><i class="lni-user"></i>${job.Employer_id.director} </span>
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-6 col-md-6 col-xs-12 text-right">
                        <div class="tag-type">
                         
                          <span class="heart-icon ${isSaved ? 'filled' : ''}" data-jobid="${job._id}">
  <i class="bi ${isSaved ? 'bi-heart-fill bookmarked' : 'bi-heart'}"></i>
</span>


                          <span class="full-time">${job.jobType}</span>
                        </div>
                      </div>
                    </div>
                  </a>
                </div>
              `;
            });
            
          }
        } catch (err) {
          console.error("Error fetching jobs:", err);
          document.querySelector(
            "#jobsContainer"
          ).innerHTML = `<div class="col-12 text-center"><p>Something went wrong. Please try again later.</p></div>`;
        }
        attachHeartListeners();
      }
     
      function attachHeartListeners() {
  setTimeout(() => {
    document.querySelectorAll('.heart-icon').forEach(icon => {
      icon.addEventListener('click', async (e) => {
        e.preventDefault();

        const jobId = icon.getAttribute('data-jobid');
        const heartIcon = icon.querySelector('i');
        const isBookmarked = icon.classList.contains('filled');

        try {
          const response = await fetch(`/user/saved-jobs/${jobId}`, {
            method: isBookmarked ? 'DELETE' : 'POST',
            headers: {
              'Content-Type': 'application/json',
              Authorization: `Bearer ${localStorage.getItem("token")}`,
            },
          });

          if (response.ok) {
            // Toggle filled class on span
            icon.classList.toggle('filled');

            // Toggle Bootstrap heart icons
            if (heartIcon.classList.contains('bi-heart-fill')) {
              heartIcon.classList.remove('bi-heart-fill', 'bookmarked');
              heartIcon.classList.add('bi-heart');
            } else {
              heartIcon.classList.remove('bi-heart');
              heartIcon.classList.add('bi-heart-fill', 'bookmarked');
            }

          } else {
            alert('Error updating saved jobs');
          }
        } catch (error) {
          console.error(error);
        }
      });
    });
  }, 0);
}




      window.onload = fetchJobs;
    </script>

     
  </body>
</html>
